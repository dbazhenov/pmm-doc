


    <title>Checking network connectivity &mdash; Percona Monitoring and Management Documentation</title>
    
  <head>
    
    
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Percona Monitoring and Management Documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="container">  

    <div class="document row">
      <div class="documentwrapper col-md-9 col-md-push-3">
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">Percona Monitoring and Management Documentation</a></li> 
      </ul>
    </div>
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pmm-admin-check-network">
<span id="id1"></span><h1><a class="reference external" href="pmm-admin.html#pmm-admin-check-network">Checking network connectivity</a><a class="headerlink" href="#pmm-admin-check-network" title="Permalink to this headline">¶</a></h1>
<p>Use the <strong class="program">pmm-admin check-network</strong> command to run tests
that verify connectivity between PMM Client and PMM Server.</p>
<p class="rubric" id="pmm-admin-check-network-usage">USAGE</p>
<p>Run this command as root or by using the <strong class="program">sudo</strong> command</p>
<div class="highlight-text" id="code-pmm-admin-check-network-options"><div class="highlight"><pre><span></span>pmm-admin check-network [OPTIONS]
</pre></div>
</div>
<p class="rubric" id="pmm-admin-check-network-options">OPTIONS</p>
<p>The <strong class="program">pmm-admin check-network</strong> command does not have its own options,
but you can use <span class="xref std std-ref">global options that apply to any other command</span></p>
<p class="rubric" id="pmm-admin-check-network-detailed-description">DETAILED DESCRIPTION</p>
<p>Connection tests are performed both ways, with results separated accordingly:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">Client</span> <span class="pre">--&gt;</span> <span class="pre">Server</span></code></p>
<p>Pings Consul API, <em>PMM Query Analytics</em> API, and Prometheus API
to make sure they are alive and reachable.</p>
<p>Performs a connection performance test to see the latency
from PMM Client to PMM Server.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Client</span> <span class="pre">&lt;--</span> <span class="pre">Server</span></code></p>
<p>Checks the status of Prometheus endpoints
and makes sure it can scrape metrics from corresponding exporters.</p>
<p>Successful pings of PMM Server from PMM Client
do not mean that Prometheus is able to scrape from exporters.
If the output shows some endpoints in problem state,
make sure that the corresponding service is running
(see <a href="#id2"><span class="problematic" id="id3">|pmm-admin.list|_</span></a>).
If the services that correspond to problematic endpoints are running,
make sure that firewall settings on the PMM Client host
allow incoming connections for corresponding ports.</p>
</li>
</ul>
<p class="rubric" id="pmm-admin-check-network-output-example">OUTPUT EXAMPLE</p>
<div class="highlight-text" id="code-pmm-admin-check-network-output"><div class="highlight"><pre><span></span><span class="hll">$ pmm-admin check-network
</span>PMM Network Status

Server Address | 192.168.100.1
Client Address | 192.168.200.1

* System Time
NTP Server (0.pool.ntp.org)         | 2017-05-03 12:05:38 -0400 EDT
PMM Server                          | 2017-05-03 16:05:38 +0000 GMT
PMM Client                          | 2017-05-03 12:05:38 -0400 EDT
PMM Server Time Drift               | OK
PMM Client Time Drift               | OK
PMM Client to PMM Server Time Drift | OK

* Connection: Client --&gt; Server
-------------------- -------------
SERVER SERVICE       STATUS
-------------------- -------------
Consul API           OK
Prometheus API       OK
Query Analytics API  OK

Connection duration | 166.689µs
Request duration    | 364.527µs
Full round trip     | 531.216µs

* Connection: Client &lt;-- Server
---------------- ----------- -------------------- -------- ---------- ---------
SERVICE TYPE     NAME        REMOTE ENDPOINT      STATUS   HTTPS/TLS  PASSWORD
---------------- ----------- -------------------- -------- ---------- ---------
linux:metrics    mongo-main  192.168.200.1:42000  OK       YES        -
mongodb:metrics  mongo-main  192.168.200.1:42003  PROBLEM  YES        -
</pre></div>
</div>
<p>For more information, run
<strong class="program">pmm-admin check-network</strong>
<code class="xref std std-option docutils literal"><span class="pre">--help</span></code>.</p>
</div>


          </div>
        </div>
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">Percona Monitoring and Management Documentation</a></li> 
      </ul>
    </div>
      </div>
      <div class="sphinxsidebar  col-md-3 col-md-pull-9">
        <div class="sphinxsidebarwrapper">
  
          {@ product_logo @}          

          {@ product_pdf_download @}
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">jQuery(document).ready(function(){ jQuery('#searchbox').show(0); });</script>
          {@ product_series @}
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <!-- div class="footer">
        &copy; Copyright Percona LLC and/or its affiliates 2009-2019.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.
    </div -->
  </div>
  </body>
