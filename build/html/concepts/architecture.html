


    <title>Overview of Percona Monitoring and Management Architecture &mdash; Percona Monitoring and Management Documentation</title>
    
  <head>
    
    
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Percona Monitoring and Management Documentation" href="../index.html" />
    <link rel="next" title="MySQL requirements" href="../conf-mysql.requirements.html" />
    <link rel="prev" title="Percona Monitoring and Management Documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="container">  

    <div class="document row">
      <div class="documentwrapper col-md-9 col-md-push-3">
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../conf-mysql.requirements.html" title="MySQL requirements"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="../index.html" title="Percona Monitoring and Management Documentation"
             accesskey="P">previous</a></li>
        <li><a href="../index.html">Percona Monitoring and Management Documentation</a></li> 
      </ul>
    </div>
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview-of-percona-monitoring-management-architecture">
<span id="pmm-architecture"></span><h1>Overview of Percona Monitoring and Management Architecture<a class="headerlink" href="#overview-of-percona-monitoring-management-architecture" title="Permalink to this headline">¶</a></h1>
<p>The PMM platform is based on a client-server model that enables scalability.
It includes the following modules:</p>
<ul class="simple">
<li><a class="reference internal" href="#pmm-client"><span class="std std-ref">PMM Client</span></a> installed on every database host that you want to monitor.
It collects server metrics, general system metrics, and Query Analytics data
for a complete performance overview.</li>
<li><a class="reference internal" href="#pmm-server"><span class="std std-ref">PMM Server</span></a> is the central part of PMM that aggregates collected data
and presents it in the form of tables, dashboards, and graphs in a web
interface.</li>
</ul>
<p>The modules are packaged for easy installation and usage. It is assumed that
the user should not need to understand what are the exact tools that make up
each module and how they interact. However, if you want to leverage the full
potential of PMM, the internal structure is important.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#pmm-client" id="id3"><a class="reference internal" href="../glossary.terminology.html#pmm-client"><span class="std std-ref">PMM Client</span></a></a></li>
<li><a class="reference internal" href="#pmm-server" id="id4"><a class="reference internal" href="../glossary.terminology.html#pmm-server"><span class="std std-ref">PMM Server</span></a></a></li>
<li><a class="reference internal" href="#orchestrator" id="id5"><a class="reference internal" href="#pmm-using-orchestrator"><span class="std std-ref">Orchestrator</span></a></a></li>
</ul>
</div>
<p>PMM is a collection of tools designed to seamlessly work together.  Some are
developed by Percona and some are third-party open-source tools.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The overall client-server model is not likely to change, but the set
of tools that make up each component may evolve with the product.</p>
</div>
<p>The following diagram illustrates how PMM is currently structured:</p>
<img alt="../_images/diagram.pmm-architecture.png" src="../_images/diagram.pmm-architecture.png" />
<div class="section" id="pmm-client">
<span id="id1"></span><h2><a class="toc-backref" href="#id3"><a class="reference internal" href="../glossary.terminology.html#pmm-client"><span class="std std-ref">PMM Client</span></a></a><a class="headerlink" href="#pmm-client" title="Permalink to this headline">¶</a></h2>
<p>Each PMM Client collects various data about general system and database
performance, and sends this data to the corresponding PMM Server.</p>
<p>The PMM Client package consist of the following:</p>
<ul class="simple">
<li><strong class="program">pmm-admin</strong> is a command-line tool for managing PMM Client,
for example, adding and removing database instances
that you want to monitor.
For more information, see <span class="xref std std-ref">pmm-admin</span>.</li>
<li><code class="docutils literal"><span class="pre">pmm-mysql-queries-0</span></code> is a service that manages the QAN agent as it
collects query performance data from MySQL and sends it to the QAN API on
<a class="reference internal" href="#pmm-server"><span class="std std-ref">PMM Server</span></a>.</li>
<li><code class="docutils literal"><span class="pre">pmm-mongodb-queries-0</span></code> is a service that manages the QAN agent as it
collects query performance data from MongoDB and sends it to QAN API on
<a class="reference internal" href="#pmm-server"><span class="std std-ref">PMM Server</span></a>.</li>
<li><strong class="program">node_exporter</strong> is a Prometheus exporter that collects general system
metrics.</li>
<li><strong class="program">mysqld_exporter</strong> is a Prometheus exporter that collects MySQL server
metrics.</li>
<li><strong class="program">mongodb_exporter</strong> is a Prometheus exporter that collects MongoDB server
metrics.</li>
<li><strong class="program">proxysql_exporter</strong> is a Prometheus exporter that collects ProxySQL
performance metrics.</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>How to install PMM Client</dt>
<dd><a class="reference internal" href="../install/clients.html#deploy-pmm-client-installing"><span class="std std-ref">Installing Clients</span></a></dd>
<dt>How to pass exporter specific options when adding a monitoring service</dt>
<dd><a class="reference internal" href="../manage/client.passing-options.html#pmm-pmm-admin-monitoring-service-pass-parameter"><span class="std std-ref">Passing options to the exporter</span></a></dd>
<dt>List of available exporter options</dt>
<dd><span class="xref std std-ref">pmm.list.exporter</span></dd>
</dl>
</div>
</div>
<div class="section" id="pmm-server">
<span id="id2"></span><h2><a class="toc-backref" href="#id4"><a class="reference internal" href="../glossary.terminology.html#pmm-server"><span class="std std-ref">PMM Server</span></a></a><a class="headerlink" href="#pmm-server" title="Permalink to this headline">¶</a></h2>
<p>PMM Server runs on the machine that will be your central monitoring host.
It is distributed as an appliance via the following:</p>
<ul class="simple">
<li>Docker image that you can use to run a container</li>
<li><abbr title="Open Virtual Appliance">OVA</abbr> that you can run in VirtualBox or another
hypervisor</li>
<li><abbr title="Amazon Machine Image">AMI</abbr> that you can run via Amazon Web Services</li>
</ul>
<p>For more information, see <span class="xref std std-ref">deploy-pmm.server.installing</span>.</p>
<p>PMM Server includes the following tools:</p>
<ul>
<li><p class="first">Query Analytics enables you to analyze MySQL query performance over periods of
time. In addition to the client-side QAN agent, it includes the following:</p>
<ul class="simple">
<li>QAN API is the backend for storing and accessing query data collected by
the QAN agent running on a <a class="reference internal" href="#pmm-client"><span class="std std-ref">PMM Client</span></a>.</li>
<li>QAN Web App is a web application for visualizing collected Query Analytics
data.</li>
</ul>
</li>
<li><p class="first">Metrics Monitor provides a historical view of metrics
that are critical to a MySQL or MongoDB server instance.
It includes the following:</p>
<ul>
<li><p class="first">Prometheus is a third-party time-series database that connects to
exporters running on a <a class="reference internal" href="#pmm-client"><span class="std std-ref">PMM Client</span></a> and aggregates metrics collected by
the exporters.  For more information, see <a class="reference external" href="https://prometheus.io/docs/introduction/overview/">Prometheus Docs</a>.</p>
<ul>
<li><p class="first">Consul provides an API that a <a class="reference internal" href="#pmm-client"><span class="std std-ref">PMM Client</span></a> can use to remotely
list, add, and remove hosts for Prometheus.  It also stores monitoring
metadata.  For more information, see <a class="reference external" href="https://www.consul.io/docs/">Consul Docs</a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Although the Consul web UI is accessible, do not make any
changes to the configuration.</p>
</div>
</li>
</ul>
</li>
<li><p class="first">Grafana is a third-party dashboard and graph builder for visualizing data
aggregated by Prometheus in an intuitive web interface.  For more
information, see <a class="reference external" href="http://docs.grafana.org/">Grafana Docs</a>.</p>
<ul class="simple">
<li>Percona Dashboards is a set of dashboards for Grafana developed by
Percona.</li>
</ul>
</li>
</ul>
</li>
<li><p class="first">Orchestrator is a MySQL replication topology management
and visualization tool.
For more information, see: <a class="reference external" href="https://github.com/outbrain/orchestrator/wiki/Orchestrator-Manual">Orchestrator Manual</a>.</p>
</li>
</ul>
<p>All tools can be accessed from the PMM Server web interface (landing page).
For more information, see <a class="reference internal" href="../tool.html#using"><span class="std std-ref">Tools of PMM</span></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Default ports</dt>
<dd><a class="reference internal" href="../glossary.terminology.html#ports"><span class="std std-ref">Ports</span></a> in <a class="reference internal" href="../glossary.terminology.html#pmm-glossary-terminology-reference"><span class="std std-ref">Terminology Reference</span></a></dd>
<dt>Enabling orchestrator</dt>
<dd><a class="reference internal" href="../glossary.terminology.html#orchestrator"><span class="std std-ref">Orchestrator</span></a> in <a class="reference internal" href="../glossary.terminology.html#pmm-glossary-terminology-reference"><span class="std std-ref">Terminology Reference</span></a></dd>
</dl>
</div>
</div>
<div class="section" id="orchestrator">
<span id="pmm-using-orchestrator"></span><h2><a class="toc-backref" href="#id5"><a class="reference internal" href="#pmm-using-orchestrator"><span class="std std-ref">Orchestrator</span></a></a><a class="headerlink" href="#orchestrator" title="Permalink to this headline">¶</a></h2>
<p>Orchestrator is a MySQL replication topology management and visualization
tool.  If it is enabled, you can access it using the <code class="docutils literal"><span class="pre">/orchestrator</span></code> URL after
PMM Server address.  Alternatively, you can click the
<span class="guilabel">MySQL Replication Topology Manager</span> button on the PMM Server landing
page.</p>
<p>To use it, create a MySQL user for Orchestrator on all managed instances:</p>
<div class="highlight-guess"><div class="highlight"><pre><span></span>GRANT SUPER, PROCESS, REPLICATION SLAVE, RELOAD ON *.*
TO &#39;orc_client_user&#39;@&#39;%&#39;
IDENTIFIED BY &#39;orc_client_password’;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The credentials in the previous example are default.
If you use a different user name or password,
you have to pass them when
<span class="xref std std-ref">running PMM Server</span>
using the
<a class="reference internal" href="../glossary.option.html#cmdoption-arg-ORCHESTRATOR_PASSWORD"><code class="xref std std-option docutils literal"><span class="pre">ORCHESTRATOR_PASSWORD</span></code></a>
and
<a class="reference internal" href="../glossary.option.html#cmdoption-arg-ORCHESTRATOR_USER"><code class="xref std std-option docutils literal"><span class="pre">ORCHESTRATOR_USER</span></code></a> options.</p>
<div class="last highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">ORCHESTRATOR_ENABLED</span><span class="o">=</span><span class="nb">true</span> <span class="nv">ORCHESTRATOR_USER</span><span class="o">=</span>name -e <span class="nv">ORCHESTRATOR_PASSWORD</span><span class="o">=</span>pass ... percona/pmm-server:latest
</pre></div>
</div>
</div>
<p>Then you can use the <span class="guilabel">Discover</span> page in the Orchestrator web interface
to add the instances to the topology.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Orchestrator is not enabled by default starting with PMM 1.3.0</strong></p>
<p>Orchestrator was included into PMM for experimental purposes.  It is a
standalone tool, not integrated with PMM other than that you can access it
from the landing page.</p>
<p class="last">In version 1.3.0 and later, Orchestrator is not enabled
by default. To enable it, see
<a class="reference internal" href="../install/docker.setting-up.html#pmm-docker-additional-option"><span class="std std-ref">Additional options</span></a> in the
<a class="reference internal" href="../install/docker.html#run-server-docker"><span class="std std-ref">Running PMM Server via Docker</span></a> section.</p>
</div>
</div>
</div>


          </div>
        </div>
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../conf-mysql.requirements.html" title="MySQL requirements"
             >next</a></li>
        <li class="right" >
          <a href="../index.html" title="Percona Monitoring and Management Documentation"
             >previous</a></li>
        <li><a href="../index.html">Percona Monitoring and Management Documentation</a></li> 
      </ul>
    </div>
      </div>
      <div class="sphinxsidebar  col-md-3 col-md-pull-9">
        <div class="sphinxsidebarwrapper">
  
          {@ product_logo @}          

          {@ product_pdf_download @}
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview of Percona Monitoring and Management Architecture</a><ul>
<li><a class="reference internal" href="#pmm-client"><code class="docutils literal"><span class="pre">PMM</span> <span class="pre">Client</span></code></a></li>
<li><a class="reference internal" href="#pmm-server"><code class="docutils literal"><span class="pre">PMM</span> <span class="pre">Server</span></code></a></li>
<li><a class="reference internal" href="#orchestrator"><code class="docutils literal"><span class="pre">Orchestrator</span></code></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../index.html"
                        title="previous chapter">Percona Monitoring and Management Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../conf-mysql.requirements.html"
                        title="next chapter">MySQL requirements</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">jQuery(document).ready(function(){ jQuery('#searchbox').show(0); });</script>
          {@ product_series @}
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <!-- div class="footer">
        &copy; Copyright Percona LLC and/or its affiliates 2009-2019.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.
    </div -->
  </div>
  </body>
