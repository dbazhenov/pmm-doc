


    <title>MySQL InnoDB Metrics &mdash; Percona Monitoring and Management Documentation</title>
    
  <head>
    
    
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Percona Monitoring and Management Documentation" href="../index.html" />
    <link rel="up" title="Metrics Monitor Dashboards" href="../index.metrics-monitor.dashboard.html" />
    <link rel="next" title="MySQL InnoDB Metrics (Advanced) Dashboard" href="dashboard.mysql-innodb-metrics-advanced.html" />
    <link rel="prev" title="MySQL InnoDB Compression Dashboard" href="dashboard.mysql-innodb-compression.html" /> 
  </head>
  <body>
    <div class="container">  

    <div class="document row">
      <div class="documentwrapper col-md-9 col-md-push-3">
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dashboard.mysql-innodb-metrics-advanced.html" title="MySQL InnoDB Metrics (Advanced) Dashboard"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="dashboard.mysql-innodb-compression.html" title="MySQL InnoDB Compression Dashboard"
             accesskey="P">previous</a></li>
        <li><a href="../index.html">Percona Monitoring and Management Documentation</a></li>
          <li><a href="../index.metrics-monitor.dashboard.html" accesskey="U">Metrics Monitor Dashboards</a></li> 
      </ul>
    </div>
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mysql-innodb-metrics">
<span id="dashboard-mysql-innodb-metrics"></span><h1>MySQL InnoDB Metrics<a class="headerlink" href="#mysql-innodb-metrics" title="Permalink to this headline">¶</a></h1>
<p>This dashboard contains metrics that help analyze how the InnoDB engine
performs.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#innodb-checkpoint-age" id="id1">InnoDB Checkpoint Age</a></li>
<li><a class="reference internal" href="#innodb-transactions" id="id2">InnoDB Transactions</a></li>
<li><a class="reference internal" href="#innodb-row-operations" id="id3">InnoDB Row Operations</a></li>
<li><a class="reference internal" href="#innodb-row-lock-time" id="id4">InnoDB Row Lock Time</a></li>
<li><a class="reference internal" href="#innodb-i-o" id="id5">InnoDB I/O</a></li>
<li><a class="reference internal" href="#innodb-log-file-usage-hourly" id="id6">InnoDB Log File Usage Hourly</a></li>
<li><a class="reference internal" href="#innodb-deadlocks" id="id7">InnoDB Deadlocks</a></li>
<li><a class="reference internal" href="#innodb-condition-pushdown" id="id8">InnoDB Condition Pushdown</a></li>
<li><a class="reference internal" href="#other-metrics" id="id9">Other Metrics</a></li>
</ul>
</div>
<div class="section" id="innodb-checkpoint-age">
<span id="dashboard-mysql-innodb-metrics-innodb-checkpoint-age"></span><h2><a class="toc-backref" href="#id1">InnoDB Checkpoint Age</a><a class="headerlink" href="#innodb-checkpoint-age" title="Permalink to this headline">¶</a></h2>
<p>The maximum checkpoint age is determined by the total length of all transaction
log files (<cite>innodb_log_file_size</cite>).</p>
<p>When the checkpoint age reaches the maximum checkpoint age, blocks are flushed
syncronously. The rules of the thumb is to keep one hour of traffic in those
logs and let the checkpointing perform its work as smooth as possible. If you
don&#8217;t do this, InnoDB will do synchronous flushing at the worst possible time,
i.e. when you are busiest.</p>
<p><strong>View all metrics of</strong> <a class="reference internal" href="#dashboard-mysql-innodb-metrics"><span class="std std-ref">MySQL InnoDB Metrics</span></a></p>
</div>
<div class="section" id="innodb-transactions">
<span id="dashboard-mysql-innodb-metrics-innodb-transactions"></span><h2><a class="toc-backref" href="#id2">InnoDB Transactions</a><a class="headerlink" href="#innodb-transactions" title="Permalink to this headline">¶</a></h2>
<p>InnoDB is an MVCC storage engine, which means you can start a transaction and
continue to see a consistent snapshot even as the data changes. This is
implemented by keeping old versions of rows as they are modified.</p>
<p>The <em>InnoDB History List</em> is the undo logs which are used to store these
modifications. They are a fundamental part of the InnoDB transactional
architecture.</p>
<p>If the history length is rising regularly, do not let open connections linger
for a long period as this can affect the performance of InnoDB
considerably. It is also a good idea to look for long running queries in QAN.</p>
<p><strong>View all metrics of</strong> <a class="reference internal" href="#dashboard-mysql-innodb-metrics"><span class="std std-ref">MySQL InnoDB Metrics</span></a></p>
</div>
<div class="section" id="innodb-row-operations">
<span id="dashboard-mysql-innodb-metrics-innodb-row-operations"></span><h2><a class="toc-backref" href="#id3">InnoDB Row Operations</a><a class="headerlink" href="#innodb-row-operations" title="Permalink to this headline">¶</a></h2>
<p>This metric allows you to see which operations occur and the number of rows
affected per operation. A metric like <em>Queries Per Second</em> will give you an idea
of queries, but one query could effect millions of rows.</p>
<p><strong>View all metrics of</strong> <a class="reference internal" href="#dashboard-mysql-innodb-metrics"><span class="std std-ref">MySQL InnoDB Metrics</span></a></p>
</div>
<div class="section" id="innodb-row-lock-time">
<span id="dashboard-mysql-innodb-metrics-innodb-row-lock-time"></span><h2><a class="toc-backref" href="#id4">InnoDB Row Lock Time</a><a class="headerlink" href="#innodb-row-lock-time" title="Permalink to this headline">¶</a></h2>
<p>When data is locked, then that means that another session cannot update that
data until the lock is released (which unlocks the data and allows other users
to update that data. Locks are usually released by either a <strong class="command">ROLLBACK</strong> or
<strong class="command">COMMIT</strong> SQL statement.</p>
<p>InnoDB implements standard row-level locking where there are two types of
locks, shared (S) locks and exclusive (X) locks.</p>
<p>A shared (S) lock permits the transaction that holds the lock to read a row.  An
exclusive (X) lock permits the transaction that holds the lock to update or
delete a row.  <em>Average Row Lock Wait Time</em> is the row lock wait time divided by
the number of row locks.</p>
<p><em>Row Lock Waits</em> indicates how many times a transaction waited on a row lock per
second.</p>
<p><em>Row Lock Wait Load</em> is a rolling <em>5</em> minute average of <em>Row Lock Waits</em>.</p>
<p><strong>View all metrics of</strong> <a class="reference internal" href="#dashboard-mysql-innodb-metrics"><span class="std std-ref">MySQL InnoDB Metrics</span></a></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>MySQL Server Documentation: Shared lock</dt>
<dd><a class="reference external" href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_shared_lock">https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_shared_lock</a></dd>
<dt>MySQL Server Documentation: Exclusive lock</dt>
<dd><a class="reference external" href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_exclusive_lock">https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_exclusive_lock</a></dd>
<dt>MySQL Server Documentation: InnoDB locking</dt>
<dd><a class="reference external" href="https://dev.mysql.com/doc/refman/5.7/en/innodb-locking.html">https://dev.mysql.com/doc/refman/5.7/en/innodb-locking.html</a></dd>
</dl>
</div>
</div>
<div class="section" id="innodb-i-o">
<span id="dashboard-mysql-innodb-metrics-innodb-io"></span><h2><a class="toc-backref" href="#id5">InnoDB I/O</a><a class="headerlink" href="#innodb-i-o" title="Permalink to this headline">¶</a></h2>
<p>This metric has the following series:</p>
<ul class="simple">
<li><em>Data Writes</em> is the total number of InnoDB data writes.</li>
<li><em>Data Reads</em> is the total number of InnoDB data reads (OS file reads).</li>
<li><em>Log Writes</em> is the number of physical writes to the InnoDB redo log file.</li>
<li><em>Data Fsyncs</em> is the number of fsync() operations. The frequency of fsync()
calls is influenced by the setting of the innodb_flush_method configuration
option.</li>
</ul>
<p><strong>View all metrics of</strong> <a class="reference internal" href="#dashboard-mysql-innodb-metrics"><span class="std std-ref">MySQL InnoDB Metrics</span></a></p>
</div>
<div class="section" id="innodb-log-file-usage-hourly">
<span id="dashboard-mysql-innodb-metrics-innodb-log-file-usage-hourly"></span><h2><a class="toc-backref" href="#id6">InnoDB Log File Usage Hourly</a><a class="headerlink" href="#innodb-log-file-usage-hourly" title="Permalink to this headline">¶</a></h2>
<p>Along with the buffer pool size, <cite>innodb_log_file_size</cite> is the most important
setting when we are working with InnoDB. This graph shows how much data was
written to InnoDB&#8217;s redo logs over each hour. When the InnoDB log files are
full, InnoDB needs to flush the modified pages from memory to disk.</p>
<p>The rules of the thumb is to keep one hour of traffic in those logs and let the
checkpointing perform its work as smooth as possible. If you don&#8217;t do this,
InnoDB will do synchronous flushing at the worst possible time, ie when you are
busiest.</p>
<p>This graph can help guide you in setting the correct <cite>innodb_log_file_size</cite>.</p>
<p><strong>View all metrics of</strong> <a class="reference internal" href="#dashboard-mysql-innodb-metrics"><span class="std std-ref">MySQL InnoDB Metrics</span></a></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Percona Database Performance Blog: Calculating a good InnoDB log file size</dt>
<dd><a class="reference external" href="https://www.percona.com/blog/2008/11/21/how-to-calculate-a-good-innodb-log-file-size/">https://www.percona.com/blog/2008/11/21/how-to-calculate-a-good-innodb-log-file-size/</a></dd>
<dt>Percona Server Documentation: Improved InnoDB I/O scalability</dt>
<dd><a class="reference external" href="http://www.percona.com/doc/percona-server/5.5/scalability/innodb_io_55.html#innodb_log_file_size">http://www.percona.com/doc/percona-server/5.5/scalability/innodb_io_55.html#innodb_log_file_size</a></dd>
</dl>
</div>
</div>
<div class="section" id="innodb-deadlocks">
<span id="dashboard-mysql-innodb-metrics-innodb-deadlocks"></span><h2><a class="toc-backref" href="#id7">InnoDB Deadlocks</a><a class="headerlink" href="#innodb-deadlocks" title="Permalink to this headline">¶</a></h2>
<p>A deadlock in MySQL happens when two or more transactions mutually hold
and request for locks, creating a cycle of dependencies. In a transaction
system, deadlocks are a fact of life and not completely avoidable. InnoDB
automatically detects transaction deadlocks, rollbacks a transaction
immediately and returns an error.</p>
<p><strong>View all metrics of</strong> <a class="reference internal" href="#dashboard-mysql-innodb-metrics"><span class="std std-ref">MySQL InnoDB Metrics</span></a></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Percona Database Performance Blog: Dealing with MySQL deadlocks</dt>
<dd><a class="reference external" href="https://www.percona.com/blog/2014/10/28/how-to-deal-with-mysql-deadlocks/">https://www.percona.com/blog/2014/10/28/how-to-deal-with-mysql-deadlocks/</a></dd>
</dl>
</div>
</div>
<div class="section" id="innodb-condition-pushdown">
<span id="dashboard-mysql-innodb-metrics-condition-pushdown"></span><h2><a class="toc-backref" href="#id8">InnoDB Condition Pushdown</a><a class="headerlink" href="#innodb-condition-pushdown" title="Permalink to this headline">¶</a></h2>
<p>Index Condition Pushdown (ICP) is an optimization for the case where MySQL
retrieves rows from a table using an index.</p>
<p>Without ICP, the storage engine traverses the index to locate rows in the base
table and returns them to the MySQL server which evaluates the <code class="docutils literal"><span class="pre">WHERE</span></code>
condition for the rows. With ICP enabled, and if parts of the <code class="docutils literal"><span class="pre">WHERE</span></code>
condition can be evaluated by using only columns from the index, the MySQL
server pushes this part of the <code class="docutils literal"><span class="pre">WHERE</span></code> condition down to the storage engine.
The storage engine then evaluates the pushed index condition by using the index
entry and only if this is satisfied is the row read from the table.</p>
<p>ICP can reduce the number of times the storage engine must access the base table
and the number of times the MySQL server must access the storage engine.</p>
<p><strong>View all metrics of</strong> <a class="reference internal" href="#dashboard-mysql-innodb-metrics"><span class="std std-ref">MySQL InnoDB Metrics</span></a></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>MySQL Server Documentation: Index Condition Pushdown optimisation</dt>
<dd><a class="reference external" href="https://dev.mysql.com/doc/refman/5.7/en/index-condition-pushdown-optimization.html">https://dev.mysql.com/doc/refman/5.7/en/index-condition-pushdown-optimization.html</a></dd>
<dt>Percona Database Performance Blog: ICP counters and how to interpret them</dt>
<dd><a class="reference external" href="https://www.percona.com/blog/2017/05/09/">https://www.percona.com/blog/2017/05/09/</a><a href="#id10"><span class="problematic" id="id11">mariadb-handler_icp_</span></a>-counters-what-they-are-and-how-to-use-them/</dd>
</dl>
</div>
</div>
<div class="section" id="other-metrics">
<span id="dashboard-mysql-innodb-metrics-other-metrics"></span><h2><a class="toc-backref" href="#id9">Other Metrics</a><a class="headerlink" href="#other-metrics" title="Permalink to this headline">¶</a></h2>
<table class="hlist"><tr><td><ul class="simple">
<li>InnoDB Logging Performance</li>
<li>InnoDB Buffer Pool Content</li>
<li>InnoDB Buffer Pool Pages</li>
<li>InnoDB Buffer Pool I/O</li>
</ul>
</td><td><ul class="simple">
<li>InnoDB Buffer Pool Requests</li>
<li>InnoDB Buffer Read-Ahead</li>
<li>InnoDB Change Buffer</li>
<li>InnoDB Change Buffer Activity</li>
</ul>
</td></tr></table>
</div>
</div>


          </div>
        </div>
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dashboard.mysql-innodb-metrics-advanced.html" title="MySQL InnoDB Metrics (Advanced) Dashboard"
             >next</a></li>
        <li class="right" >
          <a href="dashboard.mysql-innodb-compression.html" title="MySQL InnoDB Compression Dashboard"
             >previous</a></li>
        <li><a href="../index.html">Percona Monitoring and Management Documentation</a></li>
          <li><a href="../index.metrics-monitor.dashboard.html" >Metrics Monitor Dashboards</a></li> 
      </ul>
    </div>
      </div>
      <div class="sphinxsidebar  col-md-3 col-md-pull-9">
        <div class="sphinxsidebarwrapper">
  
          {@ product_logo @}          

          {@ product_pdf_download @}
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MySQL InnoDB Metrics</a><ul>
<li><a class="reference internal" href="#innodb-checkpoint-age">InnoDB Checkpoint Age</a></li>
<li><a class="reference internal" href="#innodb-transactions">InnoDB Transactions</a></li>
<li><a class="reference internal" href="#innodb-row-operations">InnoDB Row Operations</a></li>
<li><a class="reference internal" href="#innodb-row-lock-time">InnoDB Row Lock Time</a></li>
<li><a class="reference internal" href="#innodb-i-o">InnoDB I/O</a></li>
<li><a class="reference internal" href="#innodb-log-file-usage-hourly">InnoDB Log File Usage Hourly</a></li>
<li><a class="reference internal" href="#innodb-deadlocks">InnoDB Deadlocks</a></li>
<li><a class="reference internal" href="#innodb-condition-pushdown">InnoDB Condition Pushdown</a></li>
<li><a class="reference internal" href="#other-metrics">Other Metrics</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="dashboard.mysql-innodb-compression.html"
                        title="previous chapter"><em>MySQL InnoDB Compression</em> Dashboard</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dashboard.mysql-innodb-metrics-advanced.html"
                        title="next chapter">MySQL InnoDB Metrics (Advanced) Dashboard</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">jQuery(document).ready(function(){ jQuery('#searchbox').show(0); });</script>
          {@ product_series @}
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <!-- div class="footer">
        &copy; Copyright Percona LLC and/or its affiliates 2009-2019.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.
    </div -->
  </div>
  </body>
