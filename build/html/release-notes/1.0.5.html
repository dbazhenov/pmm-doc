


    <title>Percona Monitoring and Management 1.0.5 &mdash; Percona Monitoring and Management Documentation</title>
    
  <head>
    
    
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Percona Monitoring and Management Documentation" href="../index.html" />
    <link rel="up" title="Percona Monitoring and Management Release Notes" href="index.html" />
    <link rel="next" title="Percona Monitoring and Management 1.0.4" href="1.0.4.html" />
    <link rel="prev" title="Percona Monitoring and Management 1.0.6" href="1.0.6.html" /> 
  </head>
  <body>
    <div class="container">  

    <div class="document row">
      <div class="documentwrapper col-md-9 col-md-push-3">
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1.0.4.html" title="Percona Monitoring and Management 1.0.4"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="1.0.6.html" title="Percona Monitoring and Management 1.0.6"
             accesskey="P">previous</a></li>
        <li><a href="../index.html">Percona Monitoring and Management Documentation</a></li>
          <li><a href="index.html" accesskey="U">Percona Monitoring and Management Release Notes</a></li> 
      </ul>
    </div>
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="percona-monitoring-and-management-1-0-5">
<span id="id1"></span><h1>Percona Monitoring and Management 1.0.5<a class="headerlink" href="#percona-monitoring-and-management-1-0-5" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">October 14, 2016</td>
</tr>
<tr class="field-even field"><th class="field-name">PMM Server:</th><td class="field-body"><a class="reference external" href="https://hub.docker.com/r/percona/pmm-server/">https://hub.docker.com/r/percona/pmm-server/</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">PMM Client:</th><td class="field-body"><a class="reference external" href="https://www.percona.com/downloads/pmm-client/">https://www.percona.com/downloads/pmm-client/</a></td>
</tr>
</tbody>
</table>
<div class="section" id="upgrading">
<h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All custom Grafana dashboards and settings in Metrics Monitor
will be reset when you upgrade PMM Server.
Back it up and restore after the upgrade.
Starting from version 1.0.5, it is possible to preserve this data,
but you will have to recreate the <a class="reference internal" href="../install/docker.setting-up.html#data-container"><span class="std std-ref">data container</span></a>
with <code class="docutils literal"><span class="pre">-v</span> <span class="pre">/var/lib/grafana</span></code>.
If you choose to recreate the data container,
all previously collected data will be lost.</p>
</div>
<ol class="arabic">
<li><p class="first">Stop and remove the <code class="docutils literal"><span class="pre">pmm-server</span></code> container:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">stop</span> <span class="n">pmm</span><span class="o">-</span><span class="n">server</span> <span class="o">&amp;&amp;</span> <span class="n">docker</span> <span class="n">rm</span> <span class="n">pmm</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
</li>
<li><p class="first">If you also want to recreate the <code class="docutils literal"><span class="pre">pmm-data</span></code> container
with support for custom Grafana dashboards and settings:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">rm</span> <span class="n">pmm</span><span class="o">-</span><span class="n">data</span>
</pre></div>
</div>
</li>
<li><p class="first">If you removed <code class="docutils literal"><span class="pre">pmm-data</span></code> container, create it with the new version tag:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">create</span> \
  <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">prometheus</span><span class="o">/</span><span class="n">data</span> \
  <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">consul</span><span class="o">-</span><span class="n">data</span> \
  <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> \
  <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">grafana</span> \
  <span class="o">--</span><span class="n">name</span> <span class="n">pmm</span><span class="o">-</span><span class="n">data</span> \
  <span class="n">percona</span><span class="o">/</span><span class="n">pmm</span><span class="o">-</span><span class="n">server</span><span class="p">:</span><span class="mf">1.0</span><span class="o">.</span><span class="mi">5</span> <span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">true</span>
</pre></div>
</div>
</li>
<li><p class="first">Create the <code class="docutils literal"><span class="pre">pmm-server</span></code> container with the new version tag:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> \
  <span class="o">-</span><span class="n">p</span> <span class="mi">80</span><span class="p">:</span><span class="mi">80</span> \
  <span class="o">--</span><span class="n">volumes</span><span class="o">-</span><span class="kn">from</span> <span class="nn">pmm</span><span class="o">-</span><span class="n">data</span> \
  <span class="o">--</span><span class="n">name</span> <span class="n">pmm</span><span class="o">-</span><span class="n">server</span> \
  <span class="o">--</span><span class="n">restart</span> <span class="n">always</span> \
  <span class="n">percona</span><span class="o">/</span><span class="n">pmm</span><span class="o">-</span><span class="n">server</span><span class="p">:</span><span class="mf">1.0</span><span class="o">.</span><span class="mi">5</span>
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference internal" href="../install/clients.html#deploy-pmm-client-installing"><span class="std std-ref">Install new PMM Client version</span></a>.
If you previously installed using Percona repositories,
you can upgade the package as follows:</p>
<ul>
<li><p class="first">For Debian-based distributions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">--</span><span class="n">only</span><span class="o">-</span><span class="n">upgrade</span> <span class="n">pmm</span><span class="o">-</span><span class="n">client</span>
</pre></div>
</div>
</li>
<li><p class="first">For Red Hat Enterprise Linux derivatives:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">update</span> <span class="n">pmm</span><span class="o">-</span><span class="n">client</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="changes">
<h2>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h2>
<p><strong>PMM Server changes:</strong></p>
<ul>
<li><p class="first">Prometheus 1.1.3</p>
</li>
<li><p class="first">Consul 0.7.0</p>
</li>
<li><p class="first">Added Orchestrator - a MySQL replication topology management
and visualization tool.
Available at <code class="docutils literal"><span class="pre">/orchestrator</span></code> URL.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Orchestrator was included into PMM for experimental purposes.
It is a standalone tool, not integrated with PMM
other than that you can access it from the landing page.</p>
</div>
</li>
<li><p class="first">Added ProxySQL metrics and dashboard</p>
</li>
<li><p class="first">Changed metric storage encoding to achieve less disk space usage by 50-70%.</p>
</li>
<li><p class="first">Grafana data is now stored in the <a class="reference internal" href="../install/docker.setting-up.html#data-container"><span class="std std-ref">data container</span></a>
to preserve your custom dashboards and settings.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To enable this, create the data container
with <code class="docutils literal"><span class="pre">-v</span> <span class="pre">/var/lib/grafana</span></code>.</p>
</div>
</li>
<li><p class="first">MySQL Query Analytics data is now preserved when you remove and then add
a <code class="docutils literal"><span class="pre">mysql:queries</span></code> instance with the same name using <code class="docutils literal"><span class="pre">pmm-admin</span></code>.</p>
</li>
<li><p class="first">Fixed rare issue when Nginx tries to use IPv6 for localhost connections.</p>
</li>
<li><p class="first">Improvements and fixes to Query Analytics.</p>
</li>
<li><p class="first">Various dashboard improvements.</p>
</li>
</ul>
<p><strong>PMM Client changes:</strong></p>
<ul class="simple">
<li>Added check for orphaned local and remote services.</li>
<li>Added <code class="docutils literal"><span class="pre">repair</span></code> command to remove orphaned services.</li>
<li>Added <code class="docutils literal"><span class="pre">proxysql:metrics</span></code> service and <code class="docutils literal"><span class="pre">proxysql_exporter</span></code>.</li>
<li>Amended <code class="docutils literal"><span class="pre">check-network</span></code> output.</li>
<li>Disabled inital client configuration with a name that is already in use.</li>
<li>Changed the threshold for automatically disabling table stats
when adding <code class="docutils literal"><span class="pre">mysql:metrics</span></code> service to 1000 tables on the server.
Table stats were previously automatically disabled
only if there were over 10 000 tables.
You can still manually disable table stats using
<code class="docutils literal"><span class="pre">pmm-admin</span> <span class="pre">add</span> <span class="pre">mysql</span> <span class="pre">--disable-tablestats</span></code>.
For more information, see <a class="reference internal" href="../faq.html#performance-issues"><span class="std std-ref">What are common performance considerations?</span></a>.</li>
<li>Fixes for <code class="docutils literal"><span class="pre">mysql:queries</span></code> service:<ul>
<li>Improved registration and detection of orphaned setup</li>
<li>PID file &#8220;&#8221; is no longer created on Amazon Linux
(requires to re-add <code class="docutils literal"><span class="pre">mysql:queries</span></code> service)</li>
<li>Fixed support for MySQL using a timezone different than UTC</li>
<li>Corrected detection of slow log rotation and also perform its own rotation
when used as a query source</li>
<li><code class="docutils literal"><span class="pre">RELOAD</span></code> privilege is now required to flush the slow log</li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1.0.4.html" title="Percona Monitoring and Management 1.0.4"
             >next</a></li>
        <li class="right" >
          <a href="1.0.6.html" title="Percona Monitoring and Management 1.0.6"
             >previous</a></li>
        <li><a href="../index.html">Percona Monitoring and Management Documentation</a></li>
          <li><a href="index.html" >Percona Monitoring and Management Release Notes</a></li> 
      </ul>
    </div>
      </div>
      <div class="sphinxsidebar  col-md-3 col-md-pull-9">
        <div class="sphinxsidebarwrapper">
  
          {@ product_logo @}          

          {@ product_pdf_download @}
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Percona Monitoring and Management 1.0.5</a><ul>
<li><a class="reference internal" href="#upgrading">Upgrading</a></li>
<li><a class="reference internal" href="#changes">Changes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="1.0.6.html"
                        title="previous chapter">Percona Monitoring and Management 1.0.6</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="1.0.4.html"
                        title="next chapter">Percona Monitoring and Management 1.0.4</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">jQuery(document).ready(function(){ jQuery('#searchbox').show(0); });</script>
          {@ product_series @}
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <!-- div class="footer">
        &copy; Copyright Percona LLC and/or its affiliates 2009-2019.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.
    </div -->
  </div>
  </body>
