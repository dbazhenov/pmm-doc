


    <title>PMM Server Additional Options &mdash; Percona Monitoring and Management Documentation</title>
    
  <head>
    
    
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Percona Monitoring and Management Documentation" href="index.html" />
    <link rel="next" title="Slow Log Settings" href="conf-mysql.slow-log.html" />
    <link rel="prev" title="VMware Workstation Player" href="install/ova.wmware-workstation-player.html" /> 
  </head>
  <body>
    <div class="container">  

    <div class="document row">
      <div class="documentwrapper col-md-9 col-md-push-3">
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="conf-mysql.slow-log.html" title="Slow Log Settings"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="install/ova.wmware-workstation-player.html" title="VMware Workstation Player"
             accesskey="P">previous</a></li>
        <li><a href="index.html">Percona Monitoring and Management Documentation</a></li> 
      </ul>
    </div>
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pmm-server-additional-options">
<span id="pmm-glossary-pmm-server-additional-option"></span><h1>PMM Server Additional Options<a class="headerlink" href="#pmm-server-additional-options" title="Permalink to this headline">¶</a></h1>
<p>This glossary contains the addtional parameters that you may pass when starting
PMM Server.</p>
<div class="section" id="passing-options-to-pmm-server-docker-at-first-run">
<h2>Passing options to PMM Server docker at first run<a class="headerlink" href="#passing-options-to-pmm-server-docker-at-first-run" title="Permalink to this headline">¶</a></h2>
<p>Docker allows configuration options to be passed using the flag <code class="xref std std-option docutils literal"><span class="pre">-e</span></code> followed by the option you would like to set.</p>
<p>Here, we pass more than one option to PMM Server along with the <strong class="program">docker run</strong>
command. Run this command as root or by using the <strong class="program">sudo</strong> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run -d -p <span class="m">80</span>:80 <span class="se">\</span>
  --volumes-from pmm-data <span class="se">\</span>
  --name pmm-server <span class="se">\</span>
  -e <span class="nv">SERVER_USER</span><span class="o">=</span>jsmith <span class="se">\</span>
  -e <span class="nv">SERVER_PASSWORD</span><span class="o">=</span>SomeR4ndom-Pa<span class="nv">$$</span>w0rd <span class="se">\</span>
  --restart always <span class="se">\</span>
  percona/pmm-server:latest
</pre></div>
</div>
</div>
<div class="section" id="passing-options-to-pmm-server-for-an-already-deployed-docker-instance">
<h2>Passing options to <em>PMM Server</em> for an already deployed docker instance<a class="headerlink" href="#passing-options-to-pmm-server-for-an-already-deployed-docker-instance" title="Permalink to this headline">¶</a></h2>
<p>docker doesn&#8217;t support changing environment variables on an already provisioned container, therefore you need to stop the current container and start a new container with the new options.
variable with <strong>docker start</strong> if you want to change the setting for existing
installation, because <strong>docker start</strong> cares to keep container immutable and
doesn&#8217;t support changing environment variables. Therefore if you want container
with different properties,  you should run a new container instead.</p>
<ol class="arabic">
<li><p class="first">Stop and Rename the old container:</p>
<p>docker stop pmm-server
docker rename pmm-server pmm-server-old</p>
</li>
<li><p class="first">Ensure you are running the latest version of PMM Server:</p>
<blockquote>
<div><p>docker pull percona/pmm-server:latest</p>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When you destroy and recreate the container, all the
updates you have done through PMM Web interface will be lost. What’s more,
the software version will be reset to the one in the Docker image. Running
an old PMM version with a data volume modified by a new PMM version may
cause unpredictable results. This could include data loss.</p>
</div>
</li>
</ol>
<ol class="arabic" start="4">
<li><p class="first">Start the container with the new settings. For example, changing
<a class="reference internal" href="#cmdoption-arg-METRICS_RETENTION"><code class="xref std std-option docutils literal"><span class="pre">METRICS_RETENTION</span></code></a> would look as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> \
  <span class="o">-</span><span class="n">p</span> <span class="mi">80</span><span class="p">:</span><span class="mi">80</span> \
  <span class="o">--</span><span class="n">volumes</span><span class="o">-</span><span class="kn">from</span> <span class="nn">pmm</span><span class="o">-</span><span class="n">data</span> \
  <span class="o">--</span><span class="n">name</span> <span class="n">pmm</span><span class="o">-</span><span class="n">server</span> \
  <span class="o">--</span><span class="n">restart</span> <span class="n">always</span> \
  <span class="o">-</span><span class="n">e</span> <span class="n">METRICS_RESOLUTION</span><span class="o">=</span><span class="mi">5</span><span class="n">s</span> \
  <span class="n">percona</span><span class="o">/</span><span class="n">pmm</span><span class="o">-</span><span class="n">server</span><span class="p">:</span><span class="n">latest</span>
</pre></div>
</div>
</li>
<li><p class="first">Once you&#8217;re satisfied with the new container deployment options and you don&#8217;t plan to revert, you can remove the old
container:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">rm</span> <span class="n">pmm</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">old</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="list-of-pmm-server-parameters">
<h2>List of PMM Server Parameters<a class="headerlink" href="#list-of-pmm-server-parameters" title="Permalink to this headline">¶</a></h2>
<dl class="option">
<dt id="cmdoption-arg-DISABLE_TELEMETRY">
<code class="descname">DISABLE_TELEMETRY</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-DISABLE_TELEMETRY" title="Permalink to this definition">¶</a></dt>
<dd><p>With <a class="reference internal" href="glossary.terminology.html#telemetry"><span class="std std-ref">telemetry</span></a> enabled, your PMM Server sends some statistics to
<a class="reference external" href="http://v.percona.com">v.percona.com</a> every 24 hours. This statistics includes the following
details:</p>
<ul class="simple">
<li>PMM Server unique ID</li>
<li>PMM version</li>
<li>The name and version of the operating system</li>
<li>MySQL version</li>
<li>Perl version</li>
</ul>
<p>If you do not want your PMM Server to send this information, disable telemetry
when running your Docker container:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">DISABLE_TELEMETRY</span><span class="o">=</span><span class="nb">true</span> ... percona/pmm-server:latest
</pre></div>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-METRICS_RETENTION">
<code class="descname">METRICS_RETENTION</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-METRICS_RETENTION" title="Permalink to this definition">¶</a></dt>
<dd><p>This option determines how long metrics are stored at <a class="reference internal" href="glossary.terminology.html#pmm-server"><span class="std std-ref">PMM
Server</span></a>. The value is passed as a combination of hours, minutes, and
seconds, such as <strong>720h0m0s</strong>. The minutes (a number followed by <em>m</em>) and
seconds (a number followed by <em>s</em>) are optional.</p>
<p>To set the <code class="xref std std-option docutils literal"><span class="pre">METRICS_RETENTION&gt;</span></code> option to 8 days, set this option to <em>192h</em>.</p>
<p>Run this command as root or by using the <strong class="program">sudo</strong> command</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">METRICS_RETENTION</span><span class="o">=</span>192h ... percona/pmm-server:latest
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Data retention in PMM</dt>
<dd><a class="reference internal" href="glossary.terminology.html#data-retention"><span class="std std-ref">Data retention</span></a></dd>
<dt>Queries retention</dt>
<dd><a class="reference internal" href="#cmdoption-arg-QUERIES_RETENTION"><code class="xref std std-option docutils literal"><span class="pre">QUERIES_RETENTION</span></code></a></dd>
</dl>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-QUERIES_RETENTION">
<code class="descname">QUERIES_RETENTION</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-QUERIES_RETENTION" title="Permalink to this definition">¶</a></dt>
<dd><p>This option determines how many days queries are stored at <a class="reference internal" href="glossary.terminology.html#pmm-server"><span class="std std-ref">PMM Server</span></a>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">QUERIES_RETENTION</span><span class="o">=</span><span class="m">30</span> ... percona/pmm-server:latest
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Metrics retention</dt>
<dd><a class="reference internal" href="#cmdoption-arg-METRICS_RETENTION"><code class="xref std std-option docutils literal"><span class="pre">METRICS_RETENTION</span></code></a></dd>
<dt>Data retention in PMM</dt>
<dd><a class="reference internal" href="glossary.terminology.html#data-retention"><span class="std std-ref">Data retention</span></a></dd>
</dl>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-ORCHESTRATOR_ENABLED">
<code class="descname">ORCHESTRATOR_ENABLED</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-ORCHESTRATOR_ENABLED" title="Permalink to this definition">¶</a></dt>
<dd><p>This option enables Orchestrator (See
<a class="reference internal" href="concepts/architecture.html#pmm-using-orchestrator"><span class="std std-ref">Orchestrator</span></a>). By default it is disabled. It is
also desabled if this option contains <strong>false</strong>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">ORCHESTRATOR_ENABLED</span><span class="o">=</span><span class="nb">true</span> ... percona/pmm-server:latest
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Orchestrator</dt>
<dd><a class="reference internal" href="glossary.terminology.html#orchestrator"><span class="std std-ref">Orchestrator</span></a></dd>
<dt>Orchestrator Credentials</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#cmdoption-arg-ORCHESTRATOR_USER"><code class="xref std std-option docutils literal"><span class="pre">ORCHESTRATOR_USER</span></code></a></li>
<li><a class="reference internal" href="#cmdoption-arg-ORCHESTRATOR_PASSWORD"><code class="xref std std-option docutils literal"><span class="pre">ORCHESTRATOR_PASSWORD</span></code></a></li>
</ul>
</dd>
</dl>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-ORCHESTRATOR_USER">
<code class="descname">ORCHESTRATOR_USER</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-ORCHESTRATOR_USER" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass this option, when running your <a class="reference internal" href="glossary.terminology.html#pmm-server"><span class="std std-ref">PMM Server</span></a> via
Docker to set the orchestrator user. You only need this
parameter (along with <a class="reference internal" href="#cmdoption-arg-ORCHESTRATOR_PASSWORD"><code class="xref std std-option docutils literal"><span class="pre">ORCHESTRATOR_PASSWORD</span></code></a> if you have set up a custom
Orchestrator user.</p>
<p>This option has no effect if the
<a class="reference internal" href="#cmdoption-arg-ORCHESTRATOR_ENABLED"><code class="xref std std-option docutils literal"><span class="pre">ORCHESTRATOR_ENABLED</span></code></a> option is
set to <strong>false</strong>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">ORCHESTRATOR_ENABLED</span><span class="o">=</span><span class="nb">true</span> <span class="nv">ORCHESTRATOR_USER</span><span class="o">=</span>name -e <span class="nv">ORCHESTRATOR_PASSWORD</span><span class="o">=</span>pass ... percona/pmm-server:latest
</pre></div>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-ORCHESTRATOR_PASSWORD">
<code class="descname">ORCHESTRATOR_PASSWORD</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-ORCHESTRATOR_PASSWORD" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass this option, when running your <a class="reference internal" href="glossary.terminology.html#pmm-server"><span class="std std-ref">PMM Server</span></a> via Docker to set
the orchestrator password.</p>
<p>This option has no effect if the
<a class="reference internal" href="#cmdoption-arg-ORCHESTRATOR_ENABLED"><code class="xref std std-option docutils literal"><span class="pre">ORCHESTRATOR_ENABLED</span></code></a>
option is set to <strong>false</strong>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">ORCHESTRATOR_ENABLED</span><span class="o">=</span><span class="nb">true</span> <span class="nv">ORCHESTRATOR_USER</span><span class="o">=</span>name -e <span class="nv">ORCHESTRATOR_PASSWORD</span><span class="o">=</span>pass ... percona/pmm-server:latest
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#cmdoption-arg-ORCHESTRATOR_ENABLED"><code class="xref std std-option docutils literal"><span class="pre">ORCHESTRATOR_ENABLED</span></code></a></p>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-SERVER_USER">
<code class="descname">SERVER_USER</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-SERVER_USER" title="Permalink to this definition">¶</a></dt>
<dd><p>By default, the user name is <code class="docutils literal"><span class="pre">pmm</span></code>. Use this option to use another user
name.</p>
<p>Run this command as root or by using the <strong class="program">sudo</strong> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">SERVER_USER</span><span class="o">=</span>USER_NAME ... percona/pmm-server:latest
</pre></div>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-SERVER_PASSWORD">
<code class="descname">SERVER_PASSWORD</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-SERVER_PASSWORD" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the password to access the PMM Server web interface.</p>
<p>Run this command as root or by using the <strong class="program">sudo</strong> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">SERVER_PASSWORD</span><span class="o">=</span>YOUR_PASSWORD ... percona/pmm-server:latest
</pre></div>
</div>
<p>By default, the user name is <code class="docutils literal"><span class="pre">pmm</span></code>. You can change it by passing the
<a class="reference internal" href="#cmdoption-arg-SERVER_USER"><code class="xref std std-option docutils literal"><span class="pre">SERVER_USER</span></code></a> variable.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-METRICS_RESOLUTION">
<code class="descname">METRICS_RESOLUTION</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-METRICS_RESOLUTION" title="Permalink to this definition">¶</a></dt>
<dd><p>This environment variable sets the minimum resolution for checking
metrics. You should set it if the latency is higher than 1 second.</p>
<p>Run this command as root or by using the <strong class="program">sudo</strong> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">METRICS_RESOLUTION</span><span class="o">=</span>VALUE ... percona/pmm-server:latest
</pre></div>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-METRICS_MEMORY">
<code class="descname">METRICS_MEMORY</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-METRICS_MEMORY" title="Permalink to this definition">¶</a></dt>
<dd><p>By default, Prometheus in PMM Server uses all available memory for
storing the most recently used data chunks.  Depending on the amount of
data coming into Prometheus, you may require to allow less memory
consumption if it is needed for other processes.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Starting with version 1.13.0, PMM uses Prometheus 2. Due to
optimizations in Prometheus, setting the metrics memory by passing
the <a class="reference internal" href="#cmdoption-arg-METRICS_MEMORY"><code class="xref std std-option docutils literal"><span class="pre">METRICS_MEMORY</span></code></a> option is a deprecated practice.</p>
</div>
<p>If you are still using a version of PMM prior to 1.13 you might need to
set the metrics memory by passing the <a class="reference internal" href="#cmdoption-arg-METRICS_MEMORY"><code class="xref std std-option docutils literal"><span class="pre">METRICS_MEMORY</span></code></a> environment
variable along with the <strong class="program">docker run</strong> command.</p>
<p>Run this command as root or by using the <strong class="program">sudo</strong> command. The value must be passed in kilobytes. For example,
to set the limit to 4 GB of memory run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">METRICS_MEMORY</span><span class="o">=</span><span class="m">4194304</span> ... percona/pmm-server:latest
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Docker documentation: Controlling memory usage in a Docker container</dt>
<dd><a class="reference external" href="https://docs.docker.com/config/containers/resource_constraints/">https://docs.docker.com/config/containers/resource_constraints/</a></dd>
</dl>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-DISABLE_UPDATES">
<code class="descname">DISABLE_UPDATES</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-DISABLE_UPDATES" title="Permalink to this definition">¶</a></dt>
<dd><p>To update your PMM from web interface you only need to click the
<span class="guilabel">Update</span> on the home page. The <a class="reference internal" href="#cmdoption-arg-DISABLE_UPDATES"><code class="xref std std-option docutils literal"><span class="pre">DISABLE_UPDATES</span></code></a> option is useful
if updating is not desirable. Set it to <strong>true</strong> when running PMM in
the Docker container.</p>
<p>Run this command as root or by using the <strong class="program">sudo</strong> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ docker run ... -e <span class="nv">DISABLE_UPDATES</span><span class="o">=</span><span class="nb">true</span> ... percona/pmm-server:latest
</pre></div>
</div>
<p>The <a class="reference internal" href="#cmdoption-arg-DISABLE_UPDATES"><code class="xref std std-option docutils literal"><span class="pre">DISABLE_UPDATES</span></code></a> option removes the <span class="guilabel">Update</span> button
from the interface and prevents the system from being updated manually.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="conf-mysql.slow-log.html" title="Slow Log Settings"
             >next</a></li>
        <li class="right" >
          <a href="install/ova.wmware-workstation-player.html" title="VMware Workstation Player"
             >previous</a></li>
        <li><a href="index.html">Percona Monitoring and Management Documentation</a></li> 
      </ul>
    </div>
      </div>
      <div class="sphinxsidebar  col-md-3 col-md-pull-9">
        <div class="sphinxsidebarwrapper">
  
          {@ product_logo @}          

          {@ product_pdf_download @}
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PMM Server Additional Options</a><ul>
<li><a class="reference internal" href="#passing-options-to-pmm-server-docker-at-first-run">Passing options to PMM Server docker at first run</a></li>
<li><a class="reference internal" href="#passing-options-to-pmm-server-for-an-already-deployed-docker-instance">Passing options to <em>PMM Server</em> for an already deployed docker instance</a></li>
<li><a class="reference internal" href="#list-of-pmm-server-parameters">List of PMM Server Parameters</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install/ova.wmware-workstation-player.html"
                        title="previous chapter">VMware Workstation Player</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="conf-mysql.slow-log.html"
                        title="next chapter">Slow Log Settings</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">jQuery(document).ready(function(){ jQuery('#searchbox').show(0); });</script>
          {@ product_series @}
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <!-- div class="footer">
        &copy; Copyright Percona LLC and/or its affiliates 2009-2019.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.
    </div -->
  </div>
  </body>
